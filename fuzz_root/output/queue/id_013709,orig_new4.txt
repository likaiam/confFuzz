CREATE VIRTUAL TABLE v0 USING fts4 ( v3 , v2 , v1 ) ; DELETE FROM v0 WHERE v2 IS NOT NULL OR abs ( v3 ) < 1 ; CREATE VIEW v4 AS SELECT v3 , v2 , dense_rank () OVER( ORDER BY length ( datetime () OVER( ) ) DESC ) FROM v0 ; ALTER TABLE v0 RENAME TO v2 ; SELECT v1 , v1 FROM v0 WHERE v1 IS NOT NULL ; 