CREATE VIRTUAL TABLE v0 USING rtree ( v1 AS( * ) CHECK( v1 ) , v2 , v3 ) ; INSERT INTO v0 ( v3 ) VALUES ( 10 ) ,( 9223372036854775807 ) ; UPDATE v0 SET v2 = ( SELECT v2 FROM v0 WHERE ( v1 BETWEEN 3 AND - 0.100000 ) ORDER BY v1 , v3 DESC , v3 ) ; SELECT v3 , rank () OVER( ORDER BY ( SELECT DISTINCT v2 AS REVENUE ORDER BY 1 ) ) FROM v0 ORDER BY v1 ASC ; 