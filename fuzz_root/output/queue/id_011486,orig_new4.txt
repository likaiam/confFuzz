CREATE TABLE v0 ( v1 INTEGER CHECK( CASE WHEN v1 != v1 THEN 1 ELSE 1 END ) ) ; CREATE TRIGGER x AFTER UPDATE ON v0 BEGIN INSERT INTO v0 ( v1 ) SELECT v1 FROM v0 AS PROMO_REVENUE ORDER BY sum ( v1 ) OVER( ) ON CONFLICT DO NOTHING ; END ; VACUUM ; VACUUM ; CREATE TRIGGER x AFTER INSERT ON v0 WHEN ( SELECT v1 FROM v0 WHERE v0 . v1 < v1 ORDER BY v1 DESC ) BEGIN INSERT INTO v0 ( v1 ) VALUES ( 10 ) ,( 1 ) ; END ; 