CREATE VIRTUAL TABLE v0 USING fts4 ( v1 UNIQUE ON CONFLICT IGNORE GENERATED ALWAYS AS( 10 ) , v3 , v2 ) ; REPLACE INTO v0 ( v3 , v1 , v2 ) VALUES ( 'x' , 'AIR REG' , 10 ) ; CREATE VIRTUAL TABLE v4 USING rtree ( v7 AS( 10 >= v5 ) , v5 CHAR(25) , v6 ) ; UPDATE v0 SET v3 = ( SELECT v5 = ( SELECT v7 FROM v4 WHERE v7 = v5 ) FROM v4 ) ; DELETE FROM v0 WHERE v1 >= 2 OR - v2 > ( SELECT count ( * ) FROM v4 ) = 10 OR v2 < 3 AND v1 = 10 ; 