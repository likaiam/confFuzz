CREATE VIRTUAL TABLE v0 USING rtree ( v3 , v1 , v2 ) ; SELECT * FROM v0 NATURAL JOIN v0 RIGHT OUTER JOIN v0 ON v2 = v1 NATURAL JOIN v0 ; CREATE VIEW v4 AS SELECT 3.100000 * SUM ( CASE WHEN v2 LIKE 'LG PKG' THEN v3 * ( 1 - v2 ) ELSE 10 END ) FROM v0 ; UPDATE v0 SET v1 = ( SELECT 9 FROM v4 AS a JOIN v4 ON NULL = NULL ) ; 