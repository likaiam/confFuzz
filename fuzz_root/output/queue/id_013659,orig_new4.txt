CREATE VIRTUAL TABLE v0 USING rtree ( v1 , v2 , v3 ) ; CREATE VIEW v4 AS SELECT random () % 1 FROM v0 WHERE v1 IN ( 1 , 1 , 2 ) LIMIT 1 OFFSET 1 ; UPDATE v0 SET v3 = ( SELECT 10 FROM v4 LEFT JOIN v4 , v0 , v0 ) ; 