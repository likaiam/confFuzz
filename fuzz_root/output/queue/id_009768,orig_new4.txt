CREATE VIRTUAL TABLE v0 USING rtree ( v1 , v2 , v3 ) ; CREATE VIEW v4 AS SELECT count () FROM v0 WHERE ( v3 MATCH - 10 AND v3 = 3 ) ORDER BY v2 ; WITH tmp AS ( SELECT * FROM v4 ) SELECT * FROM v4 JOIN v0 NATURAL JOIN v4 ; 