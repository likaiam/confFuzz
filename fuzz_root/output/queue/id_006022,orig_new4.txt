CREATE TABLE v0 ( v3 UNIQUE ON CONFLICT IGNORE , v1 INT CHECK( v3 NOT LIKE datetime ( v1 , v1 ) ) , v2 UNIQUE ON CONFLICT FAIL ) ; INSERT INTO v0 ( v1 ) VALUES ( 'v1' ) ,( 'v0' ) ,( '29' ) ,( '1995-09-01' ) ,( 'v0' ) ; UPDATE v0 SET v2 = randomblob ( v1 ) ; SELECT v0 . v2 , v1 , rank () OVER( ORDER BY v2 DESC ) FROM v0 ORDER BY sum ( v1 ) OVER( ) DESC ; 