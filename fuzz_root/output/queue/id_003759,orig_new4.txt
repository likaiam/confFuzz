CREATE VIRTUAL TABLE v0 USING fts4 ( v2 AS( 'x' ) CHECK( 10 ) CHECK( v3 NOT LIKE printf ( 'v1' , 1 ) ) NOT NULL UNIQUE NOT NULL AS( v1 ) , v1 , v3 ) ; DROP TABLE IF EXISTS v0 ; CREATE TABLE v4 ( v6 , v5 ) ; INSERT INTO v0 VALUES ( 'x' , 0 ) ,( 'SM PACK' , 9223372036854775807 ) ,( 'SM PACK' , 9223372036854775807 ) ,( 'y' , 2000 ) ; SELECT v6 , rank () OVER( ORDER BY v6 DESC ) FROM v4 ; 