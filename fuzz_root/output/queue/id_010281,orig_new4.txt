CREATE VIRTUAL TABLE v0 USING fts4 ( v2 CHAR(25) UNIQUE AS( v3 ) PRIMARY KEY NOT NULL , v3 CHAR(15) PRIMARY KEY ON CONFLICT REPLACE , v1 ) ; INSERT INTO v0 ( v1 , v2 , v1 ) VALUES ( '1994-01-01' , 3 , 3 ) ,( '1994-01-01' , 2 , 10 ) ,( 'x' , 1 , 10 ) ,( 'v1' , 10 , 10 ) ; SELECT v2 FROM v0 WHERE v1 = 10 AND v1 > 3 ORDER BY v2 ; DELETE FROM v0 WHERE v2 MATCH ( SELECT min ( 10.100000 ) , sum ( v1 ) OVER( ORDER BY v1 ) AS m FROM v0 WHERE v2 OR 0 ) ; 