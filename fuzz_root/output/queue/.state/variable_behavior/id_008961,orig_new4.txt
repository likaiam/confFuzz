CREATE VIRTUAL TABLE v0 USING fts4 ( v3 , v2 , v1 ) ; INSERT INTO v0 VALUES ( 10.100000 , 1 , 10 ) ; UPDATE v0 SET v3 = randomblob ( ( 10 = 10 AND v3 < CASE WHEN LIKELY ( v2 ) != 'x' THEN 1 ELSE 9223372036854775808 END ) + v1 + julianday ( * ) ) ; SELECT min ( DISTINCT 1 , 1 , NULL , v3 ) WHERE v3 = v1 AND v3 > 8 ; SELECT * FROM v0 NATURAL JOIN v0 ORDER BY min ( DISTINCT 3 , 0.100000 , NULL , v2 ) DESC ; 