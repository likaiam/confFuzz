CREATE VIRTUAL TABLE v0 USING rtree ( v3 , v1 , v2 ) ; CREATE VIEW v4 AS SELECT 10.100000 * SUM ( CASE WHEN v1 LIKE 'Ar' THEN v1 * ( 12 - v2 ) ELSE 2 END ) FROM v0 ; UPDATE v0 SET v1 = ( SELECT 0 FROM v4 ) ; 