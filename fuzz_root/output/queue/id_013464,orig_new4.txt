CREATE VIRTUAL TABLE v0 USING fts4 ( v1 CHAR(1) , v4 INTEGER UNIQUE ON CONFLICT ROLLBACK , v7 INTEGER UNIQUE ON CONFLICT REPLACE , v5 INTEGER UNIQUE ON CONFLICT ROLLBACK , v3 INTEGER UNIQUE ON CONFLICT ROLLBACK , v6 UNIQUE ON CONFLICT IGNORE , v2 ) ; CREATE VIEW v8 AS SELECT v3 FROM v0 UNION ALL SELECT v2 FROM v0 ; UPDATE v0 SET v7 = ( SELECT 10 FROM v8 LEFT JOIN v0 , v8 , v0 ORDER BY datetime () DESC ) ; 