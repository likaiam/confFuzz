CREATE VIRTUAL TABLE v0 USING fts4 ( v1 , v2 , v3 UNIQUE AS( ifnull ( v3 , 10 ) ) PRIMARY KEY ) ; INSERT INTO v0 ( v1 ) VALUES ( 10 ) ,( 1 ) ; INSERT INTO v0 ( v1 ) VALUES ( 10.100000 ) ,( 10 ) ,( 1 ) ; DELETE FROM v0 WHERE v2 = ( SELECT NTILE ( 10 ) OVER( ORDER BY v3 NULLS LAST ) - 10 AS nt FROM v0 ) OR v1 <= 2 + 10 ; 