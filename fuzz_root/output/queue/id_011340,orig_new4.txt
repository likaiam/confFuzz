CREATE VIRTUAL TABLE v0 USING fts4 ( v3 INT UNIQUE AS( v2 ) PRIMARY KEY NOT NULL , v1 CHAR(15) PRIMARY KEY ON CONFLICT REPLACE , v2 ) ; INSERT INTO v0 ( v1 , v1 , v2 ) VALUES ( 'x' , 10 , 1 ) ,( 'x' , 3 , 10 ) ,( 'x' , 10 , 10 ) ,( 'x' , 10 , 10 ) ; SELECT v2 FROM v0 WHERE v3 = 0 AND v1 MATCH 'x' ORDER BY v3 ; DELETE FROM v0 WHERE v3 MATCH ( SELECT min ( 0.100000 ) , sum ( v2 ) OVER( ORDER BY v3 ) AS m FROM v0 WHERE v3 OR 10 ) ; 