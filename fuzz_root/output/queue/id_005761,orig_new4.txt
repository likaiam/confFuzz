CREATE VIRTUAL TABLE v0 USING rtree ( v3 , v2 , v1 ) ; CREATE VIEW v4 AS SELECT count ( * ) FROM v0 GROUP BY v2 , v3 HAVING AVG ( v1 ) = 3 ; UPDATE v0 SET v2 = ( SELECT 0 FROM v4 AS a JOIN v4 ON NULL = NULL JOIN v0 ON NULL = NULL ) ; 