CREATE VIRTUAL TABLE v0 USING rtree ( v2 , v1 , v3 ) ; CREATE VIEW v4 AS SELECT DISTINCT * FROM v0 AS alias GROUP BY v1 , v1 HAVING AVG ( v2 ) = 1 ORDER BY v1 ; UPDATE v0 SET v1 = ( SELECT 1 FROM v4 LEFT JOIN v4 , v0 , v4 ) ; 