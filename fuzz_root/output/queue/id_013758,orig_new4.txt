CREATE VIRTUAL TABLE v0 USING fts4 ( v1 CHAR(25) UNIQUE ON CONFLICT IGNORE GENERATED ALWAYS AS( 3 ) , v2 , v3 ) ; REPLACE INTO v0 ( v2 , v2 , v3 ) VALUES ( 'v0' , 'v0' , 10 ) ; CREATE VIRTUAL TABLE v4 USING rtree ( v5 AS( 9223372036854775807 >= v5 ) , v7 CHAR(25) , v6 ) ; UPDATE v4 SET v6 = ( SELECT v1 = ( SELECT v6 FROM v4 WHERE v5 = v5 ) FROM v0 ) ; DELETE FROM v0 WHERE v2 >= 10 OR - v2 > ( SELECT count ( * ) FROM v0 ) = 10 OR v3 < 10 AND v3 = 2 ; 