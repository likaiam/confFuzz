CREATE VIRTUAL TABLE v0 USING fts4 ( v7 FLOAT UNIQUE , v6 UNIQUE GENERATED ALWAYS AS( v2 ) , v5 INT , v4 INT UNIQUE GENERATED ALWAYS AS( NULL ) , v3 INTEGER UNIQUE , v2 CHAR(25) PRIMARY KEY CHECK( v6 ) , v1 VARCHAR(20) UNIQUE ) ; CREATE TABLE v8 ( v17 INT UNIQUE ON CONFLICT REPLACE , v16 INTEGER UNIQUE ON CONFLICT FAIL , v14 INTEGER UNIQUE ON CONFLICT ROLLBACK , v13 INTEGER UNIQUE ON CONFLICT ABORT , v12 INTEGER UNIQUE ON CONFLICT ROLLBACK , v11 INTEGER UNIQUE ON CONFLICT ROLLBACK , v10 UNIQUE ON CONFLICT IGNORE , v9 PRIMARY KEY ON CONFLICT ROLLBACK , v15 UNIQUE ) ; SELECT NTILE ( 3 ) OVER( ORDER BY v17 NULLS LAST ) - 10 AS q FROM v8 GROUP BY v17 ORDER BY v10 ASC ; SELECT * FROM v0 LEFT JOIN v8 ON v9 GLOB 'MED P' WHERE v14 = 'SM PACK' OR v12 = v0 . v1 GROUP BY v14 ; SELECT * FROM v0 NATURAL JOIN v8 ORDER BY sum ( - - v12 IS NOT NULL ) OVER( ) ; 