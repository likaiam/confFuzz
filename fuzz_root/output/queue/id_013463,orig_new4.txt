CREATE VIRTUAL TABLE v0 USING fts4 ( v2 CHAR(1) , v1 INTEGER UNIQUE ON CONFLICT ROLLBACK , v5 INTEGER UNIQUE ON CONFLICT IGNORE , v4 INTEGER UNIQUE ON CONFLICT ROLLBACK , v7 INTEGER UNIQUE ON CONFLICT ROLLBACK , v6 UNIQUE ON CONFLICT IGNORE , v3 ) ; CREATE VIEW v8 AS SELECT v2 FROM v0 UNION ALL SELECT v6 FROM v0 ; UPDATE v0 SET v1 = ( SELECT 1 FROM v0 LEFT JOIN v8 , v0 , v8 ORDER BY datetime () DESC ) ; 