CREATE TABLE temp . v0 ( v1 PRIMARY KEY DESC ON CONFLICT IGNORE CHECK( v1 NOT LIKE last_insert_rowid () ) ) ; DELETE FROM v0 WHERE v1 IS NOT NULL OR abs ( v1 ) < 3 ; CREATE TEMP TRIGGER x AFTER INSERT ON temp . v0 BEGIN UPDATE v0 SET v1 = v1 ISNULL WHERE v1 >= x ( x () , 'x' ) ; END ; ALTER TABLE v0 RENAME v1 TO v1 ; SELECT DISTINCT * FROM v0 ORDER BY sum ( 1 ) OVER( ) DESC , v1 , v1 DESC ; 