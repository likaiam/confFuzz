CREATE TABLE v0 ( v2 INTEGER AS( ( v2 BETWEEN 1 AND 3 ) ) CHECK( v2 ) , v1 INTEGER CHECK( v1 NOT LIKE datetime ( - v2 ) ) UNIQUE PRIMARY KEY ) ; CREATE VIRTUAL TABLE v3 USING fts4 ( v4 UNIQUE ON CONFLICT IGNORE GENERATED ALWAYS AS( 2 ) , v5 , v6 ) ; CREATE TRIGGER x AFTER UPDATE ON v0 BEGIN WITH tmp AS ( SELECT v5 FROM v3 ) SELECT 10 , 0 , 10 ; END ; ALTER TABLE v0 RENAME v1 TO v6 ; SELECT v2 , v1 FROM v0 WHERE v2 IS NOT NULL ; 