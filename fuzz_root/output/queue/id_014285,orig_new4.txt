CREATE VIRTUAL TABLE v0 USING rtree ( v3 , v1 , v2 INTEGER CHECK( 'v0' != julianday ( v2 , 10 , v1 NOT LIKE v2 AS m ) NOT LIKE randomblob ( v2 NOT LIKE v3 ) ) ) ; CREATE VIEW v4 AS SELECT v3 FROM v0 UNION ALL SELECT v1 FROM v0 ; SELECT DISTINCT * FROM v4 AS a JOIN v0 AS AVG_YEARLY ON 1.100000 + 2000.100000 JOIN v4 NATURAL JOIN v4 ; UPDATE v0 SET v3 = ( SELECT sum ( v3 ) OVER( ORDER BY v1 ) FROM v4 NATURAL JOIN v0 ) ; 