CREATE TABLE v0 ( v1 INTEGER PRIMARY KEY ON CONFLICT REPLACE ) ; INSERT INTO v0 ( v1 ) VALUES ( 9223372036854775807 ) ,( 10 ) ,( 3 ) ; CREATE TABLE v2 ( v3 INTEGER , v5 INTEGER , v6 INTEGER , v7 INTEGER , v8 , v9 , v10 , v4 INTEGER PRIMARY KEY UNIQUE UNIQUE ON CONFLICT REPLACE CHECK( 0 ) CHECK( v1 NOT LIKE 'v0' ) NOT NULL UNIQUE ) ; SELECT ( SELECT NTILE ( 10 ) OVER( ORDER BY v1 NULLS LAST ) - 0 AS nt FROM v0 ) AS AVG_YEARLY ; SELECT * FROM v2 , v0 WHERE v1 = v1 AND v1 = 10 ; 