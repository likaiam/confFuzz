CREATE VIRTUAL TABLE v0 USING fts4 ( v6 CHAR(1) , v5 INTEGER UNIQUE ON CONFLICT ROLLBACK , v4 INTEGER UNIQUE ON CONFLICT ABORT , v2 INTEGER UNIQUE ON CONFLICT ROLLBACK , v3 INTEGER UNIQUE ON CONFLICT ROLLBACK , v1 UNIQUE ON CONFLICT IGNORE , v7 ) ; CREATE VIEW v8 AS SELECT v5 FROM v0 UNION ALL SELECT v7 FROM v0 NATURAL JOIN v0 ; UPDATE v0 SET v3 = ( SELECT 2 FROM v8 LEFT JOIN v0 , v8 , v8 ) ; 