CREATE TABLE v0 ( v1 UNIQUE ON CONFLICT IGNORE CHECK( typeof ( 'SM PACK' ) NOT LIKE 'LG PACK' ) , v2 INTEGER AS( 'v1' ) CHECK( v2 NOT LIKE min ( 10 , 0 , NULL , v2 ) ) NOT NULL UNIQUE ) ; INSERT INTO v0 VALUES ( 10 ) ; CREATE INDEX v3 ON v0 ( v2 ) WHERE v2 = v1 IS NOT NULL ; SELECT v2 FROM v0 NATURAL JOIN v0 WHERE v1 IN ( SELECT v0 . v1 AS REVENUE FROM v0 ) ; VACUUM ; 