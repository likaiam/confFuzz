CREATE VIRTUAL TABLE v0 USING rtree ( v3 , v2 , v1 ) ; CREATE VIEW v4 AS SELECT SUM ( v3 * ( 2 - v2 ) ) AS REVENUE FROM v0 WHERE v2 % 2 != 10 ORDER BY v3 ; UPDATE v0 SET v3 = ( SELECT 2 FROM v0 LEFT JOIN v4 , v4 , v0 ) ; 