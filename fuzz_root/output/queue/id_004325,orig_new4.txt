CREATE VIRTUAL TABLE v0 USING fts4 ( v1 UNIQUE ON CONFLICT IGNORE CHECK( v2 NOT LIKE printf ( random () , 10 ) ) PRIMARY KEY , v2 INTEGER UNIQUE ON CONFLICT ROLLBACK ) ; CREATE VIRTUAL TABLE v3 USING rtree ( v5 INT , v6 , v4 ) ; INSERT INTO v0 ( v1 ) VALUES ( 10 ) ,( 0 ) ; UPDATE v0 SET v1 = ( SELECT v4 FROM v3 WHERE v5 MATCH - NULL AND v4 = 10 ) ; 