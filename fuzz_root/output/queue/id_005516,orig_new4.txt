CREATE VIRTUAL TABLE v0 USING rtree ( v3 AS( 'v1' ) CHECK( v3 = v2 ) CHECK( v1 NOT LIKE 'v1' ) NOT NULL UNIQUE , v1 , v2 ) ; CREATE VIEW v4 AS SELECT DISTINCT * FROM v0 GROUP BY v2 , v2 HAVING AVG ( v2 ) = 2 ORDER BY v1 ; UPDATE v0 SET v2 = ( SELECT 10 FROM v4 LEFT JOIN v4 , v4 , v4 ) ; 