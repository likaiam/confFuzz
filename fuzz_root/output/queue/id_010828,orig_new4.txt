CREATE VIRTUAL TABLE v0 USING fts4 ( v1 NOT NULL AS( - v4 ) , v2 , v3 INT GENERATED ALWAYS AS( NULL ) , v5 INTEGER UNIQUE ON CONFLICT ROLLBACK , v6 UNIQUE ON CONFLICT IGNORE , v7 PRIMARY KEY ON CONFLICT ROLLBACK , v8 CHECK( v5 ISNULL ) , v4 ) ; INSERT INTO v0 ( v7 , v8 ) SELECT - v6 , v3 FROM v0 NATURAL JOIN v0 ; UPDATE v0 SET v1 = ( SELECT v2 AS f1 FROM v0 WHERE v2 MATCH NOT ( 'x' = 'MED P' AND random () % 1 = 1 ) ) ; SELECT DISTINCT * FROM v0 NATURAL JOIN v0 NATURAL JOIN v0 NATURAL JOIN v0 NATURAL JOIN v0 ; SELECT * FROM v0 NATURAL JOIN v0 ORDER BY sum ( - - v2 IS NOT NULL ) OVER( ) DESC ; 